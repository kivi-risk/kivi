# é€»è¾‘å›žå½’

> é£ŽæŽ§ä¸Žè¯„åˆ†å¡

é£ŽæŽ§é¡¾åæ€ä¹‰å°±æ˜¯é£Žé™©æŽ§åˆ¶ï¼ŒæŒ‡é£Žé™©ç®¡ç†è€…é‡‡å–å„ç§æŽªæ–½å’Œæ–¹æ³•ï¼Œ
æ¶ˆç­æˆ–å‡å°‘é£Žé™©äº‹ä»¶å‘ç”Ÿçš„å„ç§å¯èƒ½æ€§ï¼Œæˆ–é£Žé™©äº‹ä»¶å‘ç”Ÿæ—¶é€ æˆçš„æŸå¤±ã€‚

ä¿¡ç”¨è¯„åˆ†å¡æ¨¡åž‹æ˜¯æœ€å¸¸è§çš„é‡‘èžé£ŽæŽ§æ‰‹æ®µä¹‹ä¸€ï¼Œå®ƒæ˜¯æŒ‡æ ¹æ®å®¢æˆ·çš„å„ç§å±žæ€§å’Œè¡Œä¸ºæ•°æ®ï¼Œ
åˆ©ç”¨ä¸€å®šçš„ä¿¡ç”¨è¯„åˆ†æ¨¡åž‹ï¼Œå¯¹å®¢æˆ·è¿›è¡Œä¿¡ç”¨è¯„åˆ†ï¼Œæ®æ­¤å†³å®šæ˜¯å¦ç»™äºˆæŽˆä¿¡ä»¥åŠæŽˆä¿¡çš„é¢åº¦å’Œåˆ©çŽ‡ï¼Œ
ä»Žè€Œè¯†åˆ«å’Œå‡å°‘åœ¨é‡‘èžäº¤æ˜“ä¸­å­˜åœ¨çš„äº¤æ˜“é£Žé™©ã€‚

è¯„åˆ†å¡æ¨¡åž‹åœ¨ä¸åŒçš„ä¸šåŠ¡é˜¶æ®µä½“çŽ°çš„æ–¹å¼å’ŒåŠŸèƒ½ä¹Ÿä¸ä¸€æ ·ã€‚
æŒ‰ç…§å€Ÿè´·ç”¨æˆ·çš„å€Ÿè´·æ—¶é—´ï¼Œè¯„åˆ†å¡æ¨¡åž‹å¯ä»¥åˆ’åˆ†ä¸ºä»¥ä¸‹ä¸‰ç§ï¼š

1. è´·å‰ï¼šç”³è¯·è¯„åˆ†å¡ï¼ˆApplication score cardï¼‰ï¼Œåˆç§°ä¸ºAå¡
1. è´·ä¸­ï¼šè¡Œä¸ºè¯„åˆ†å¡ï¼ˆBehavior score cardï¼‰ï¼Œåˆç§°ä¸ºBå¡
1. è´·åŽï¼šå‚¬æ”¶è¯„åˆ†å¡ï¼ˆCollection score cardï¼‰ï¼Œåˆç§°ä¸ºCå¡

> é€»è¾‘å›žå½’

**é€»è¾‘å›žå½’æœ¬èº«å…·æœ‰è‰¯å¥½çš„æ ¡å‡†åº¦ï¼Œå…¶è¾“å‡ºæ¦‚çŽ‡ä¸ŽçœŸå®žæ¦‚çŽ‡ä¹‹é—´å­˜åœ¨è‰¯å¥½çš„ä¸€è‡´æ€§ã€‚**
å› æ­¤ï¼Œæˆ‘ä»¬ä¹Ÿå°±å¯ä»¥ç›´æŽ¥æŠŠæ¦‚çŽ‡åˆ†æ•°çº¿å½¢æ˜ å°„ä¸ºæ•´æ•°åˆ†æ•°ã€‚

å°†å®¢æˆ·è¿çº¦çš„æ¦‚çŽ‡è¡¨ç¤ºä¸ºpï¼Œåˆ™æ­£å¸¸çš„æ¦‚çŽ‡ä¸º1-pã€‚
$$
p(y=1|\theta,\ X+b) = \frac{1}{1+e^{-\theta^TX+b}}
$$
æ•´ç†ä»¥ä¸Šå…¬å¼ï¼š
$$
\begin{aligned}
log(\frac{p}{1-p}) & = \theta^TX+b \\\\
& = \theta^TWoe(X)+b
\end{aligned}
$$
`WOE`å˜æ¢æ˜¯ä¸€ä¸ªåˆ†æ®µå‡½æ•°ï¼Œå…¶æŠŠè‡ªå˜é‡`x`ä¸Ž`y`ä¹‹é—´çš„éžçº¿æ€§å…³ç³»è½¬æ¢ä¸ºçº¿æ€§å…³ç³»ã€‚
è‹¥æŠŠ`WOE`å®šä¹‰å¦‚ä¸‹:

$$ 
Woe(X)=
\begin{cases}
woe_1 = ln(\frac{Bad_1}{Good_1}) - ln(\frac{Bad_T}{Good_T}),\ x\in bin_1 \\\\
woe_2 = ln(\frac{Bad_2}{Good_2}) - ln(\frac{Bad_T}{Good_T}),\ x\in bin_2 \\\\
.... \\\\
woe_m = ln(\frac{Bad_m}{Good_m}) - ln(\frac{Bad_T}{Good_T}),\ x\in bin_m \\\\
\end{cases}
$$

é‚£ä¹ˆå«ä¹‰ä¸ºï¼šè‡ªå˜é‡`x`åœ¨ç»è¿‡`WOE`å˜æ¢åŽï¼Œå–å€¼è¶Šå¤§ï¼Œé¢„æµ‹ä¸º`bad`çš„æ¦‚çŽ‡è¶Šé«˜ã€‚
æˆ‘ä»¬å¯ä»¥å®šä¹‰`Odds`åå¥½æ¯”æ¥è¡¨ç¤ºå®¢æˆ·è¿çº¦çš„ç›¸å¯¹æ¦‚çŽ‡ï¼Œ`Odds`è¶Šå¤§ï¼Œä»£è¡¨`bad`çš„æ¦‚çŽ‡è¶Šé«˜ï¼›
è€Œä¿¡ç”¨åˆ†è¶Šé«˜ï¼Œä»£è¡¨`bad`çš„æ¦‚çŽ‡è¶Šä½Žã€‚

$$
define
\begin{cases}
A>0,\ B>0 \\\\
odds = \frac{p}{1-p}
\end{cases}
$$

å°† $odds$ å¸¦å…¥é€»è¾‘å›žå½’å‡½æ•°å¯å¾—ï¼š
$$
log(odds) = \theta^TX+b
$$

è¯„åˆ†å¡çš„åˆ†å€¼å¯ä»¥å®šä¹‰ä¸ºæ¯”çŽ‡å¯¹æ•°çš„çº¿æ€§è¡¨è¾¾æ¥ï¼Œå³ï¼š
$$
\begin{aligned}
Score & = A-B\times log(odds)\\\\
& = A-B[\theta^TWoe(X)+b]
\end{aligned}
$$

å…¶ä¸­`A`ä¸Ž`B`æ˜¯å¸¸æ•°ï¼Œé€šå¸¸å°†å¸¸æ•°Aç§°ä¸ºè¡¥å¿ï¼Œå¸¸æ•°Bç§°ä¸ºåˆ»åº¦ã€‚
`B`å‰é¢çš„è´Ÿå·å¯ä»¥ä½¿å¾—è¿çº¦æ¦‚çŽ‡è¶Šä½Žï¼Œå¾—åˆ†è¶Šé«˜ã€‚
é€šå¸¸æƒ…å†µä¸‹ï¼Œå³é«˜åˆ†å€¼ä»£è¡¨ä½Žé£Žé™©ï¼Œä½Žåˆ†å€¼ä»£è¡¨é«˜é£Žé™©ã€‚`A`ã€`B`çš„å€¼å¯ä»¥
é€šè¿‡å°†ä¸¤ä¸ªå·²çŸ¥æˆ–å‡è®¾çš„åˆ†å€¼å¸¦å…¥è®¡ç®—å¾—åˆ°ã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œéœ€è¦è®¾å®šä¸‰ä¸ªå‡è®¾ï¼ˆå‚æ•°ï¼‰ï¼š

1. **åŸºå‡†`Odds`**ï¼šä¸ŽçœŸå®žè¿çº¦æ¦‚çŽ‡ä¸€ä¸€å¯¹åº”ï¼Œå¯æ¢ç®—å¾—åˆ°è¿çº¦æ¦‚çŽ‡ã€‚
2. **åŸºå‡†åˆ†æ•°**ï¼šæŸä¸ªç‰¹å®šçš„è¿çº¦æ¦‚çŽ‡ä¸‹çš„é¢„æœŸè¯„åˆ†ï¼Œå³æ¯”çŽ‡`Odds`ä¸º $\theta_0$ 
æ—¶çš„åˆ†æ•°ä¸º $P_0$ã€‚
2. **`PDO`(Points to Double the Odds)**ï¼šè¯¥è¿çº¦æ¦‚çŽ‡ç¿»å€çš„è¯„åˆ†ï¼Œå³
`Odds`ï¼ˆåå¥½æ¯”ï¼‰å˜æˆ2å€æ—¶ï¼Œæ‰€å‡å°‘çš„ä¿¡ç”¨åˆ†ã€‚

è§£å‡º$A$å’Œ$B$:

$$
\begin{aligned}
Base\\_score & = A - B\times ln(Odds_0), \\\\
Base\\_score - PDO & = A - B\times ln(2Odds_0)\\\\
B & = \frac{PDO}{ln2} \\\\
A & = Base\\_score + B\times ln(Odds_0) \\\\
\end{aligned}
$$

åœ¨å®žé™…çš„åº”ç”¨ä¸­ï¼Œæˆ‘ä»¬ä¼šè®¡ç®—å‡ºæ¯ä¸ªå˜é‡çš„å„åˆ†ç®±å¯¹åº”çš„åˆ†å€¼ã€‚
æ–°ç”¨æˆ·äº§ç”Ÿæ—¶ï¼Œå¯¹åº”åˆ°æ¯ä¸ªåˆ†ç®±çš„å€¼ï¼Œå°†è¿™äº›å€¼ç›¸åŠ ï¼Œæœ€åŽåŠ ä¸Šåˆå§‹åŸºç¡€åˆ†ï¼Œ
å¾—åˆ°æœ€ç»ˆçš„ç»“æžœã€‚

$$
Score = A - B{\theta_0 + \theta_1x_1 + ... + \theta_nx_n}
$$

å¼ä¸­ï¼šå˜é‡ $x_1,\ ...,\ x_n.$ æ˜¯å‡ºçŽ°åœ¨æœ€ç»ˆæ¨¡åž‹çš„å…¥æ¨¡å˜é‡ã€‚
ç”±äºŽæ‰€æœ‰çš„å…¥æ¨¡å˜é‡éƒ½è¿›è¡Œäº†`WOE`ç¼–ç ï¼Œå¯ä»¥å°†è¿™äº›è‡ªå˜é‡ä¸­çš„æ¯ä¸€ä¸ªéƒ½å†™ 
$(\theta_iw_{ij})\delta_{ij}$ çš„å½¢å¼ï¼š

$$ 
f(x)=A-B
\begin{cases}
\theta_0 \\\\
+(\theta_1 w_{11})\delta_{11}+(\theta_1w_{12})\delta_{12}+... \\\\
+(\theta_n w_{n1})\delta_{n1}+(\theta_nw_{n1})\delta_{n1}+... \\\\
\end{cases}
$$

å…¶ä¸­ï¼Œ$A-B\theta_0$ä¸ºåŸºç¡€åˆ†æ•°ï¼Œ$\theta_i$ä¸ºé€»è¾‘å›žå½’ä¸­ç¬¬$i$ä¸ªè‡ªå˜é‡çš„ç³»æ•°ï¼Œ
$w_{ij}$ä¸ºç¬¬$i$ä¸ªå˜é‡çš„ç¬¬$j$ä¸ªåˆ†ç®±çš„`WOE`å€¼ï¼Œ$\delta_{ij}$æ˜¯`0ï¼Œ1`é€»è¾‘å˜é‡ï¼Œ
å½“$\delta_{ij}$ä»£è¡¨è‡ªå˜é‡$i$å–ç¬¬$j$ä¸ªåˆ†ç®±ï¼Œå½“$\delta_{ij}$ä»£è¡¨è‡ªå˜é‡$i$ä¸å–ç¬¬$j$ä¸ªåˆ†ç®±ã€‚
æœ€ç»ˆå¾—åˆ°è¯„åˆ†å¡æ¨¡åž‹ï¼š

|å˜é‡|åˆ†ç®±ç±»åˆ«|åˆ†å€¼|
|----|----|----|
|åŸºå‡†åˆ†|\\|$A-B\theta_0$|
|$x_1$|1|$-B\theta_1w_{11}$|
|$x_1$|2|$-B\theta_1w_{12}$|
|$x_1$|...|...|
|$x_1$|$k_i$|$-B\theta_1w_{1k_i}$|
|$x_2$|1|$-B\theta_{2}w_{21}$|
|$x_2$|2|$-B\theta_{2}w_{22}$|
|$x_2$|...|...|
|$x_2$|$k_2$|$-B\theta_{2}w_{2k_2}$|
|...|...|...|
|$x_n$|1|$-B\theta_{n}w_{n1}$|
|$x_n$|2|$-B\theta_{n}w_{n2}$|
|$x_n$|...|...|
|$x_n$|$k_n$|$-B\theta_{n}w_{nk_n}$|

ä»Žä»¥ä¸Šå…¬å¼ä¸­ï¼Œæˆ‘ä»¬å‘çŽ°æ¯ä¸ªåˆ†ç®±çš„è¯„åˆ†éƒ½å¯ä»¥è¡¨ç¤ºä¸º $-B(\theta_iw_{ij})$ï¼Œ
ä¹Ÿå°±æ˜¯è¯´å½±å“æ¯ä¸ªåˆ†ç®±çš„å› ç´ åŒ…æ‹¬ä¸‰éƒ¨åˆ†ï¼Œåˆ†åˆ«ä¸ºå‚æ•° $B$ï¼Œå˜é‡ç³»æ•° $\theta_i$ï¼Œ
å’Œå¯¹åº”åˆ†ç®±çš„`WOE`ç¼–ç  $w_{ij}$ã€‚


> ðŸ“š Reference


> Editor&Coding: Chensy
